# –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Cloud Templates Ubuntu –≤ Proxmox (SDN-ready)

–ù–∞–±–æ—Ä bash-—Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **–≥–æ—Ç–æ–≤—ã—Ö –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é cloud-init —à–∞–±–ª–æ–Ω–æ–≤ (template)** –≤ **Proxmox VE**. –°–∫—Ä–∏–ø—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è **–º–∞—Å—Å–æ–≤–æ–≥–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**, **SDN-—Å–µ—Ç–µ–π** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è **–¥–≤–µ –ª–∏–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π.

### üèóÔ∏è –õ–∏–Ω–µ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è Proxmox VE 7/8 (–±–∞–∑–æ–≤–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ | –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è |
| :--- | :--- | :--- | :--- |
| **`ubuntu2004-template.sh`** | –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω Ubuntu 20.04 | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑, SDN-friendly | PVE 7/8, –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ |
| **`ubuntu2004-template-auto.sh`** | –®–∞–±–ª–æ–Ω —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ | PVE 7/8, –≥–æ—Ç–æ–≤—ã–µ "–∑–æ–ª–æ—Ç—ã–µ –æ–±—Ä–∞–∑—ã" |

### üöÄ –õ–∏–Ω–µ–π–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è Proxmox VE 9 (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ | –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è |
| :--- | :--- | :--- | :--- |
| **`ubuntu-template-pve9.sh`** | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è PVE 9 | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Ubuntu 20.04/22.04/24.04 | **PVE 9, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã** |
| **`ubuntu-template-auto-pve9.sh`** | –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω —Å –ø–∞–∫–µ—Ç–∞–º–∏ –¥–ª—è PVE 9 | –£–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | **PVE 9, production-–æ–±—Ä–∞–∑—ã** |

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –°–∫—Ä–∏–ø—Ç—ã 7/8 | **–°–∫—Ä–∏–ø—Ç—ã PVE 9** |
| :--- | :--- | :--- |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π Ubuntu** | –¢–æ–ª—å–∫–æ 20.04 | **20.04, 22.04, 24.04** |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ VM** | i440fx | **Q35 + OVMF (UEFI)** |
| **–°–µ—Ç–µ–≤–æ–π –¥—Ä–∞–π–≤–µ—Ä** | virtio | **virtio-net-pci** |
| **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∏—Å–∫–æ–≤** | –ë–∞–∑–æ–≤–∞—è | **iothread=1, discard** |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ | **+ Ballooning** |
| **–ü—Ä–æ–≤–µ—Ä–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ | **–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PVE** |

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* ‚úÖ **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ Ubuntu cloud images** (disk-kvm/img)
* ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Proxmox/QEMU** (–≤–µ—Ä—Å–∏–æ–Ω–Ω–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)
* ‚úÖ **SDN-friendly** (bridge –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏)
* ‚úÖ **Cloud-init** (DHCP, hostname, SSH keys)
* ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤** (–≤ auto-–≤–µ—Ä—Å–∏—è—Ö)
* ‚úÖ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
* ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π Proxmox VE**: 7, 8, **9**

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤:
* Proxmox VE 7, 8 –∏–ª–∏ **9** (–≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ª–∏–Ω–µ–π–∫—É)
* Storage `local-lvm` (–∏–ª–∏ –¥—Ä—É–≥–æ–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–µ –¥–∏—Å–∫–∏ VM)
* –î–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ cloud image
* –ó–∞–ø—É—Å–∫ –æ—Ç `root`

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è auto-—Å–∫—Ä–∏–ø—Ç–æ–≤:
* –†–∞–±–æ—á–∏–π —Å–µ—Ç–µ–≤–æ–π –º–æ—Å—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `vmbr0`) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ VM –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### üì¶ –õ–∏–Ω–µ–π–∫–∞ –¥–ª—è Proxmox VE 7/8

#### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Å–∫–∞—á–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç):
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω Ubuntu 20.04
./ubuntu2004-template.sh <TEMPLATE_VMID> <RAM_MB> <DISK_GB> <CORES>

# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —Å –ø–∞–∫–µ—Ç–∞–º–∏
./ubuntu2004-template-auto.sh <TEMPLATE_VMID> <RAM_MB> <DISK_GB> <CORES>
```

#### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu2004-template.sh)" -- <VMID> <RAM_MB> <DISK_GB> <CORES>

# –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω —Å –ø–∞–∫–µ—Ç–∞–º–∏
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu2004-template-auto.sh)" -- <VMID> <RAM_MB> <DISK_GB> <CORES>
```

**–ü—Ä–∏–º–µ—Ä—ã –¥–ª—è PVE 7/8:**
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω: VMID 9000, 512MB RAM, 4GB disk, 1 —è–¥—Ä–æ
./ubuntu2004-template.sh 9000 512 4 1

# –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω: VMID 9100, 1GB RAM, 10GB disk, 2 —è–¥—Ä–∞
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu2004-template-auto.sh)" -- 9100 1024 10 2
```

### üöÄ –õ–∏–Ω–µ–π–∫–∞ –¥–ª—è Proxmox VE 9 (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)

#### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å –≤—ã–±–æ—Ä–æ–º –≤–µ—Ä—Å–∏–∏ Ubuntu
./ubuntu-template-pve9.sh <TEMPLATE_VMID> <UBUNTU_VERSION> <RAM_MB> <DISK_GB> <CORES>

# –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω —Å –ø–∞–∫–µ—Ç–∞–º–∏ –¥–ª—è PVE 9
./ubuntu-template-auto-pve9.sh <TEMPLATE_VMID> <UBUNTU_VERSION> <RAM_MB> <DISK_GB> <CORES>
```

#### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω PVE 9
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu-template-pve9.sh)" -- <VMID> <UBUNTU_VERSION> <RAM_MB> <DISK_GB> <CORES>

# –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω PVE 9
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu-template-auto-pve9.sh)" -- <VMID> <UBUNTU_VERSION> <RAM_MB> <DISK_GB> <CORES>
```

**–ü—Ä–∏–º–µ—Ä—ã –¥–ª—è PVE 9:**
```bash
# –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω Ubuntu 22.04: VMID 9200, 2GB RAM, 20GB disk, 2 —è–¥—Ä–∞
./ubuntu-template-pve9.sh 9200 22.04 2048 20 2

# –ê–≤—Ç–æ—à–∞–±–ª–æ–Ω Ubuntu 24.04: VMID 9300, 4GB RAM, 30GB disk, 4 —è–¥—Ä–∞
bash -c "$(curl -fsSL https://raw.githubusercontent.com/pbolkhovitin/proxmox_scripts/main/vm/ubuntu-template-auto-pve9.sh)" -- 9300 24.04 4096 30 4
```

### üéØ –ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç auto-—Å–∫—Ä–∏–ø—Ç—ã?

**–î–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ PVE 7/8:**
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞–±–æ—Ä –¥–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è:
```
ipcalc iproute2 netplan.io net-tools iperf3 iptables iputils-ping nmap procps tcpdump traceroute systemd telnet dnsutils isc-dhcp-server apache2 qemu-guest-agent
```

**–î–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ PVE 9:**
–£–º–Ω—ã–π –ø–æ–¥–±–æ—Ä –ø–∞–∫–µ—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä—Å–∏–∏ Ubuntu + –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã.

## üîß –ß—Ç–æ –¥–µ–ª–∞—é—Ç —Å–∫—Ä–∏–ø—Ç—ã?

### –ë–∞–∑–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–Ω–µ-auto):
1. –ó–∞–≥—Ä—É–∂–∞—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Ubuntu cloud image
2. –°–æ–∑–¥–∞—é—Ç VM —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥–∏—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç cloud-init
4. –ü—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç VM –≤ **template**

### –ê–≤—Ç–æ-—Å–∫—Ä–∏–ø—Ç—ã (auto):
1. –í—ã–ø–æ–ª–Ω—è—é—Ç –≤—Å–µ —à–∞–≥–∏ –±–∞–∑–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
2. **–ó–∞–ø—É—Å–∫–∞—é—Ç VM –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –≤–Ω—É—Ç—Ä–∏:**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ (`apt update && apt upgrade`)
   - **–ü—Ä–æ–≤–µ—Ä–∫—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Å–µ—Ö –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤** (—Ç–æ–ª—å–∫–æ –≤ PVE 9 –∞–≤—Ç–æ-—Å–∫—Ä–∏–ø—Ç–∞—Ö)
   - –û—á–∏—Å—Ç–∫—É –∫—ç—à–∞ apt –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
3. –í—ã–∫–ª—é—á–∞—é—Ç VM, –æ—á–∏—â–∞—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. –ü—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –≤ –≥–æ—Ç–æ–≤—ã–π –∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é **template**

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –°–æ–∑–¥–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (template) **–Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∑–∞–ø—É—Å–∫–∞**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `qm clone`.

## üåê –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é (SDN)

–í–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö **–Ω–µ –∑–∞–¥–∞–Ω bridge**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å:

```bash
--net0 virtio           # –í —Å–∫—Ä–∏–ø—Ç–∞—Ö PVE 7/8
--net0 virtio-net-pci   # –í —Å–∫—Ä–∏–ø—Ç–∞—Ö PVE 9
```

–°–µ—Ç—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
* SDN (VXLAN / EVPN)
* –û–±—ã—á–Ω—ã–µ bridges
* VLAN

### –ü—Ä–∏–º–µ—Ä –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è SDN:
```bash
# –î–ª—è —à–∞–±–ª–æ–Ω–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ PVE 7/8
qm clone 9000 101 --name web01
qm set 101 --net0 virtio,bridge=vmbr-sdn-prod
qm start 101

# –î–ª—è —à–∞–±–ª–æ–Ω–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ PVE 9
qm clone 9200 102 --name web02-pve9
qm set 102 --net0 virtio-net-pci,bridge=vmbr-sdn-prod,firewall=1
qm start 102
```

## üîê Cloud-init –∏ –¥–æ—Å—Ç—É–ø

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `ubuntu`
* –ü–∞—Ä–æ–ª—å –Ω–µ –∑–∞–¥–∞—ë—Ç—Å—è (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ auto-—Å–∫—Ä–∏–ø—Ç–∞—Ö —É–¥–∞–ª—è—é—Ç—Å—è)
* –î–ª—è –¥–æ—Å—Ç—É–ø–∞ **–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ SSH-–∫–ª—é—á –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏:**
  ```bash
  qm set <VMID> --sshkey ~/.ssh/id_rsa.pub
  ```

## üß† –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–∫—Ä–∏–ø—Ç—ã PVE 7/8**:
- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å Proxmox VE 7 –∏–ª–∏ 8
- –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Ubuntu 20.04
- –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–∫—Ä–∏–ø—Ç—ã PVE 9**:
- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å **Proxmox VE 9**
- –ù—É–∂–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Ubuntu (22.04/24.04)
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Production-–æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω—É–∂–¥–∞—é—â–∏–µ—Å—è –≤ UEFI –∏ —É–ª—É—á—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°–∫—Ä–∏–ø—Ç—ã PVE 7/8 | –°–∫—Ä–∏–ø—Ç—ã PVE 9 |
| :--- | :--- | :--- |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ VM** | i440fx (BIOS) | **Q35 + OVMF (UEFI)** |
| **–°–µ—Ç–µ–≤–æ–π –¥—Ä–∞–π–≤–µ—Ä** | `virtio` | `virtio-net-pci` |
| **–ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º** | –ë–∞–∑–æ–≤—ã–µ | **–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PVE** |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ | **Ballooning –≤–∫–ª—é—á—ë–Ω** |
| **–§–æ—Ä–º–∞—Ç cloud-init** | configdrive | **configdrive2** |
| **–ú–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤** | –í—Å–µ–≥–¥–∞ –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π** |

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ template –Ω–∞–ø—Ä—è–º—É—é** ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `qm clone`
2. **–î–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ auto-—Å–∫—Ä–∏–ø—Ç—ã –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ VM –ø–µ—Ä–µ–¥ `qm template`
3. **PVE 9 —Å–∫—Ä–∏–ø—Ç—ã** –∏–º–µ—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (OVMF)
4. **–ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –ª–∏–Ω–µ–π–∫–∞–º–∏** –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üÜï –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ PVE 7/8 –Ω–∞ PVE 9

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ Proxmox VE 9:

1. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã** –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö VMID
2. **–°—Ä–∞–≤–Ω–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
3. **–û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Å —É—á—ë—Ç–æ–º –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ** production-–æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT / Public Domain ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ.

---

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π:** –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–µ –ª–∏–Ω–µ–π–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ Proxmox VE 9 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã PVE 9.
